# Automation
Automation is a module which can be used to trigger some specific action an event in the system. 
Below you can see an automation example for resetting a user's password:

![Create new automation](./new_automation.png)

1. Automation name - free form text to describe an action. You will see it on the list of automation. 
2. Event  - event based on which action will be triggered. Currently, events are predefined by Jexia. If you would need any additional events please, let us know.
3. Integration - one from list integration that you set up under the Integration section. Currently, we have only have SMTP integration. 
4. Template subject - this would be an email subject which the user will see in his client. 
5. Template body - this is a message that your client will get in the email.
6. token - an autogenerated token which you will need to change a password.
7. email - the email will be taken from the Project User record. 

If you will request change password for an email which is not in the Project User list, you will get an error.  

## How it is working
Let's say you setup integration and automation to catch `UMS: password reset request` for your project. Now, when your app will request reset password for the user, action will be triggered and email will be sent to the client. The client email will be taken from the Project User record. The email will have a template that you've created during setup and placeholders will be changed to the proper solution. We have some variables available for templates (email, token). Before sending, the template will be updated with real values for placeholders. 

We expect your application will be managing endpoints to generate and accept a new password from the client. 
As different applications have different requirements for password strengths as well as templating for the page. 
From the page, you can send a request to Jexia with a token and a new password.

<CodeSwitcher :languages="{js:'JavaScript',bash:'cURL'}">
<template v-slot:js>
 
```js
// To request email with new token: 
ums.requestResetPassword('Elon@tesla.com');

// To apply newpassword
ums.resetPassword(Token, newPassword);
```

</template>
<template v-slot:bash>

``` bash
# To request token for change password for specific email
curl 
-X POST -d '{
  "email":"user@email"
}' "https://$PROJECT_ID.app.jexia.com/ums/resetpassword/" | jq .


# To apply new password
curl 
-X POST -d '{
  "new_password": "jexia_super"
}' "https://$PROJECT_ID.app.jexia.com/ums/resetpassword/token" | jq .
```

</template>
</CodeSwitcher>
